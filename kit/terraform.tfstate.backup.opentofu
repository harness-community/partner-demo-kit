{"version":4,"terraform_version":"1.10.7","serial":1,"lineage":"c009fdb9-2788-59a0-45a4-d3362a48c65a","outputs":{},"resources":[{"mode":"managed","type":"harness_platform_connector_docker","name":"workshopdocker","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"credentials":[{"password_ref":"docker_password","username":"","username_ref":"docker_username"}],"delegate_selectors":null,"description":"","execute_on_delegate":false,"id":"workshopdocker","identifier":"workshopdocker","name":"Workshop Docker","org_id":"default","project_id":"Base_Demo","tags":null,"type":"DockerHub","url":"https://index.docker.io/v2/"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo","harness_platform_secret_text.docker_password","harness_platform_secret_text.docker_username"]}]},{"mode":"managed","type":"harness_platform_connector_kubernetes","name":"workshop_k8s","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"client_key_cert":[],"delegate_selectors":null,"description":"Connector to local K8s cluster (minikube)","force_delete":null,"id":"workshop_k8s","identifier":"workshop_k8s","inherit_from_delegate":[{"delegate_selectors":["helm-delegate"]}],"name":"Workshop K8s","openid_connect":[],"org_id":"default","project_id":"Base_Demo","service_account":[],"tags":null,"username_password":[]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_connector_prometheus","name":"prometheus","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"delegate_selectors":["helm-delegate"],"description":"Connector to Prometheus instance (use ngrok URL or cluster-local URL)","headers":[],"id":"prometheus","identifier":"prometheus","name":"Prometheus","org_id":"default","password_ref":"","project_id":"Base_Demo","tags":null,"url":"http://prometheus-k8s.monitoring.svc.cluster.local:9090/","user_name":""},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_environment","name":"dev","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"color":"#0063F7","description":"","force_delete":null,"git_details":null,"id":"dev","identifier":"dev","name":"Dev","org_id":"default","project_id":"Base_Demo","tags":null,"type":"PreProduction","yaml":"environment:\n  name: Dev\n  identifier: dev\n  tags: {}\n  type: PreProduction\n  orgIdentifier: default\n  projectIdentifier: Base_Demo\n"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_environment","name":"prod","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"color":"#0063F7","description":"","force_delete":null,"git_details":null,"id":"prod","identifier":"prod","name":"Prod","org_id":"default","project_id":"Base_Demo","tags":null,"type":"Production","yaml":"environment:\n  name: Prod\n  identifier: prod\n  tags: {}\n  type: Production\n  orgIdentifier: default\n  projectIdentifier: Base_Demo\n"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_infrastructure","name":"k8s_dev","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"deployment_type":"Kubernetes","description":"","env_id":"dev","force_delete":null,"git_details":null,"id":"k8s_dev","identifier":"k8s_dev","name":"K8s Dev","org_id":"default","project_id":"Base_Demo","tags":["owner:ed.slatt"],"type":"KubernetesDirect","yaml":"infrastructureDefinition:\n  name: K8s Dev\n  identifier: k8s_dev\n  description: \"\"\n  tags:\n    owner: ed.slatt\n  orgIdentifier: default\n  projectIdentifier: Base_Demo\n  environmentRef: dev\n  deploymentType: Kubernetes\n  type: KubernetesDirect\n  spec:\n    connectorRef: workshop_k8s\n    namespace: default\n    releaseName: release-\u003c+INFRA_KEY\u003e\n  allowSimultaneousDeployments: true\n"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_connector_kubernetes.workshop_k8s","harness_platform_environment.dev","harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_monitored_service","name":"backend_dev","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"id":"backend_dev","identifier":"backend_dev","org_id":"default","project_id":"Base_Demo","request":[{"change_sources":[],"dependencies":[],"description":"","enabled":false,"environment_ref":"dev","environment_ref_list":null,"health_sources":[{"identifier":"prometheus","name":"Prometheus","spec":"{\"connectorRef\":\"prometheus\",\"feature\":\"apm\",\"metricDefinitions\":[{\"analysis\":{\"deploymentVerification\":{\"enabled\":true,\"serviceInstanceFieldName\":\"pod\"},\"liveMonitoring\":{\"enabled\":true},\"sli\":{\"enabled\":true}},\"groupName\":\"Infrastructure\",\"identifier\":\"Prometheus_Metric\",\"isManualQuery\":true,\"metricName\":\"Prometheus Metric\",\"query\":\"avg(container_cpu_system_seconds_total{namespace=\\\"default\\\", pod!~\\\".*canary.*\\\", pod=~\\\"backend-deployment.*\\\"})\",\"riskProfile\":{\"riskCategory\":\"Performance_Other\",\"thresholdTypes\":[\"ACT_WHEN_HIGHER\"]}}]}","type":"Prometheus","version":""}],"name":"backend","notification_rule_refs":[],"service_ref":"backend","tags":null,"template_ref":"","type":"Application","version_label":""}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_connector_docker.workshopdocker","harness_platform_connector_prometheus.prometheus","harness_platform_environment.dev","harness_platform_project.base_demo","harness_platform_secret_text.docker_password","harness_platform_secret_text.docker_username","harness_platform_service.backend"]}]},{"mode":"managed","type":"harness_platform_monitored_service","name":"backend_prod","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"id":"backend_prod","identifier":"backend_prod","org_id":"default","project_id":"Base_Demo","request":[{"change_sources":[],"dependencies":[],"description":"","enabled":false,"environment_ref":"prod","environment_ref_list":null,"health_sources":[{"identifier":"prometheus","name":"Prometheus","spec":"{\"connectorRef\":\"prometheus\",\"feature\":\"apm\",\"metricDefinitions\":[{\"analysis\":{\"deploymentVerification\":{\"enabled\":true,\"serviceInstanceFieldName\":\"pod\"},\"liveMonitoring\":{\"enabled\":true},\"sli\":{\"enabled\":true}},\"groupName\":\"Infrastructure\",\"identifier\":\"Prometheus_Metric\",\"isManualQuery\":true,\"metricName\":\"Prometheus Metric\",\"query\":\"avg(container_cpu_system_seconds_total{namespace=\\\"default\\\", pod!~\\\".*canary.*\\\", pod=~\\\"backend-deployment.*\\\"})\",\"riskProfile\":{\"riskCategory\":\"Performance_Other\",\"thresholdTypes\":[\"ACT_WHEN_HIGHER\"]}}]}","type":"Prometheus","version":""}],"name":"backend","notification_rule_refs":[],"service_ref":"backend","tags":null,"template_ref":"","type":"Application","version_label":""}]},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_connector_docker.workshopdocker","harness_platform_connector_prometheus.prometheus","harness_platform_environment.prod","harness_platform_project.base_demo","harness_platform_secret_text.docker_password","harness_platform_secret_text.docker_username","harness_platform_service.backend"]}]},{"mode":"managed","type":"harness_platform_project","name":"base_demo","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"color":"#0063F7","description":"","id":"Base_Demo","identifier":"Base_Demo","modules":["CD","CE","CET","CF","CHAOS","CI","CODE","CORE","CV","DBOPS","FME","HAR","IACM","IDP","PMS","SEI","SRM","SSCA","STO","TEMPLATESERVICE"],"name":"Base Demo","org_id":"default","tags":null},"sensitive_attributes":[],"private":"bnVsbA=="}]},{"mode":"managed","type":"harness_platform_repo","name":"partner_demo_kit","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"created":0,"created_by":13544,"default_branch":"main","description":"Base demo repository for Harness partner workshops","git_ignore":null,"git_url":"https://git.harness.io/i5PKNXNDSHuuT1uNSJgl-A/default/Base_Demo/partner_demo_kit.git","id":"partner_demo_kit","identifier":"partner_demo_kit","license":null,"name":"partner_demo_kit","org_id":"default","path":"i5PKNXNDSHuuT1uNSJgl-A/default/Base_Demo/partner_demo_kit","project_id":"Base_Demo","readme":null,"source":[{"host":"","password":"","repo":"harness-community/partner-demo-kit","type":"github","username":""}],"updated":0},"sensitive_attributes":[[{"type":"get_attr","value":"source"}]],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_secret_text","name":"docker_password","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"additional_metadata":[],"description":"","id":"docker_password","identifier":"docker_password","name":"docker-pw","org_id":"default","project_id":"Base_Demo","secret_manager_identifier":"harnessSecretManager","tags":null,"value":"5fd6cc31-d731-4f4a-87fd-6373efb9d027","value_type":"Inline"},"sensitive_attributes":[[{"type":"get_attr","value":"value"}]],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_secret_text","name":"docker_username","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"additional_metadata":[],"description":"","id":"docker_username","identifier":"docker_username","name":"docker-username","org_id":"default","project_id":"Base_Demo","secret_manager_identifier":"harnessSecretManager","tags":null,"value":"degas1980","value_type":"Inline"},"sensitive_attributes":[[{"type":"get_attr","value":"value"}]],"private":"bnVsbA==","dependencies":["harness_platform_project.base_demo"]}]},{"mode":"managed","type":"harness_platform_service","name":"backend","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"description":"","fetch_resolved_yaml":null,"force_delete":null,"git_details":null,"id":"backend","identifier":"backend","import_from_git":null,"is_force_import":null,"name":"backend","org_id":"default","project_id":"Base_Demo","tags":null,"yaml":"service:\n  name: backend\n  identifier: backend\n  orgIdentifier: default\n  projectIdentifier: Base_Demo\n  serviceDefinition:\n    spec:\n      manifests:\n        - manifest:\n            identifier: backend\n            type: K8sManifest\n            spec:\n              store:\n                type: HarnessCode\n                spec:\n                  repoName: partner_demo_kit\n                  gitFetchType: Branch\n                  paths:\n                    - harness-deploy/backend/manifests\n                  branch: main\n              valuesPaths:\n                - harness-deploy/backend/values.yaml\n              skipResourceVersioning: false\n              enableDeclarativeRollback: false\n      artifacts:\n        primary:\n          primaryArtifactRef: \u003c+input\u003e\n          sources:\n            - spec:\n                connectorRef: workshopdocker\n                imagePath: dockerhubaccountid/harness-demo\n                tag: backend-latest\n                digest: \"\"\n              identifier: backend\n              type: DockerRegistry\n    type: Kubernetes\n"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_connector_docker.workshopdocker","harness_platform_project.base_demo","harness_platform_secret_text.docker_password","harness_platform_secret_text.docker_username"]}]},{"mode":"managed","type":"harness_platform_template","name":"compile_application","provider":"provider[\"registry.opentofu.org/harness/harness\"]","instances":[{"schema_version":0,"attributes":{"comments":"","description":null,"force_delete":null,"git_details":[{"base_branch":"","branch_name":"","commit_message":"","connector_ref":"","file_path":"","last_commit_id":"","last_object_id":"","repo_name":"","store_type":""}],"git_import_details":[],"id":"Compile_Application","identifier":"Compile_Application","import_from_git":null,"is_stable":true,"name":"Compile Application","org_id":"default","project_id":"Base_Demo","tags":null,"template_import_request":[],"template_yaml":"template:\n  name: \"Compile Application\"\n  identifier: \"Compile_Application\"\n  versionLabel: \"v0.1\"\n  type: Step\n  projectIdentifier: Base_Demo\n  orgIdentifier: default\n  tags: {}\n  spec:\n    type: Run\n    spec:\n      connectorRef: workshopdocker\n      image: node:20-alpine\n      shell: Sh\n      command: |-\n        cd frontend-app/harness-webapp\n        npm install\n        npm install -g @angular/cli\n\n        mkdir -p ./src/environments\n        echo \"export const environment = {\n          production: true,\n          defaultApiUrl: \"'\"http://localhost:8000\"'\",\n          defaultSDKKey: \"'\"\u003c+variable.sdk\u003e\"'\"\n        };\" \u003e ./src/environments/environment.prod.ts\n\n\n        echo \"export const environment = {\n          production: true,\n          defaultApiUrl: \"'\"http://localhost:8000\"'\",\n          defaultSDKKey: \"'\"\u003c+variable.sdk\u003e\"'\"\n        };\" \u003e ./src/environments/environment.ts\n\n        npm run build\n","version":"v0.1"},"sensitive_attributes":[],"private":"bnVsbA==","dependencies":["harness_platform_connector_docker.workshopdocker","harness_platform_project.base_demo","harness_platform_secret_text.docker_password","harness_platform_secret_text.docker_username"]}]}],"check_results":null}
